<head>
  <link
    type="text/css"
    rel="stylesheet"
    href="stylesheets/salesforce-lightning-design-system.min.css"
  />
</head>
<html
  style="
    background-image: url('https://img.wallpapersafari.com/desktop/1280/1024/44/82/JurEZW.jpg');
    background-repeat: no-repeat;
    background-size: cover;
  "
>
  <body>
    <div>
      <div
        class="slds-card"
        style="
          margin: 5rem;
          box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2),
            0 6px 20px 0 rgba(0, 0, 0, 0.19);
        "
      >
        <div class="slds-card__header slds-grid">
          <header class="slds-media slds-media_center slds-has-flexi-truncate">
            <div class="slds-media__body">
              <h2 class="slds-card__header-title">
                <span>üìù Sally Goldfarb's Order Form</span>
              </h2>
            </div>
          </header>
        </div>
        <div class="slds-p-around_medium">
          <div id="smart-button-container" class="slds-form">
            <div class="slds-form-element slds-form-element_horizontal">
              <label
                style="font-weight: bold"
                class="slds-form-element__label"
                for="description"
                ><abbr class="slds-required" title="required">* </abbr>Name &
                Description</label
              >
              <div>
                <input
                  type="text"
                  name="descriptionInput"
                  id="description"
                  placeholder="Please enter your name & description for the item(s) you're purchasing"
                  required="true"
                  class="slds-input"
                />
              </div>
              <p
                id="descriptionError"
                style="visibility: hidden; color: red; text-align: center"
              >
                Please enter a description
              </p>
            </div>
            <div class="slds-form-element slds-form-element_horizontal">
              <label
                style="font-weight: bold"
                class="slds-form-element__label"
                for="amount"
                ><abbr class="slds-required" title="required">* </abbr>Amount
                (USD)</label
              >
              <div>
                <input
                  type="number"
                  name="amountInput"
                  id="amount"
                  placeholder="0"
                  required="true"
                  class="slds-input"
                />
              </div>
              <p
                id="priceLabelError"
                style="visibility: hidden; color: red; text-align: center"
              >
                Please enter a price
              </p>
            </div>
            <div id="invoiceidDiv" style="text-align: center; display: none">
              <label for="invoiceid"> </label
              ><input
                name="invoiceid"
                maxlength="127"
                type="text"
                id="invoiceid"
                value=""
              />
            </div>
            <p
              id="invoiceidError"
              style="visibility: hidden; color: red; text-align: center"
            >
              Please enter an Invoice ID
            </p>
          </div>
        </div>
      </div>
    </div>
    <div id="paypal-button-container"></div>
    <script
      src="https://www.paypal.com/sdk/js?client-id=AZJkJuFbAQKS3ijP2IRmcS24ZPMA7rNJfoom9R6uqQgo9K6t5ZLimiWIQwf_nPR7-ruEa5qEIjMJ-lNR&currency=USD&intent=capture&enable-funding=venmo"
      data-sdk-integration-source="integrationbuilder"
    ></script>

    <script>
      const fundingSources = [
        paypal.FUNDING.PAYPAL,
        paypal.FUNDING.VENMO,
        paypal.FUNDING.CARD,
      ];

      for (const fundingSource of fundingSources) {
        const paypalButtonsComponent = paypal.Buttons({
          fundingSource: fundingSource,

          // optional styling for buttons
          // https://developer.paypal.com/docs/checkout/standard/customize/buttons-style-guide/
          style: {
            shape: "rect",
            height: 40,
          },

          // set up the transaction
          createOrder: (data, actions) => {
            // pass in any options from the v2 orders create call:
            // https://developer.paypal.com/api/orders/v2/#orders-create-request-body
            const createOrderPayload = {
              purchase_units: [
                {
                  amount: {
                    value: "88.44",
                  },
                },
              ],
            };

            return actions.order.create(createOrderPayload);
          },

          // finalize the transaction
          onApprove: (data, actions) => {
            const captureOrderHandler = (details) => {
              const payerName = details.payer.name.given_name;
              console.log("Transaction completed!");
            };

            return actions.order.capture().then(captureOrderHandler);
          },

          // handle unrecoverable errors
          onError: (err) => {
            console.error(
              "An error prevented the buyer from checking out with PayPal"
            );
          },
        });

        if (paypalButtonsComponent.isEligible()) {
          paypalButtonsComponent
            .render("#paypal-button-container")
            .catch((err) => {
              console.error("PayPal Buttons failed to render");
            });
        } else {
          console.log("The funding source is ineligible");
        }
      }
    </script>
  </body>
</html>
